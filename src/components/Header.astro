---
import LoginDialog from './Login.astro';
---

<header class="border-b bg-gradient-to-r from-primary/10 via-background to-primary/10">
  <div class="container mx-auto px-6 py-6">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <div class="flex items-center gap-3">
        <div class="rounded-lg bg-primary p-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary-foreground" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M4 7h16M4 12h16M4 17h16" />
          </svg>
        </div>
        <div>
          <h1 class="text-2xl font-bold">Calzado Premium</h1>
          <p id="subtitle" class="text-sm text-muted-foreground">
            CatÃ¡logo de Productos
          </p>
        </div>
      </div>

      <!-- Usuario -->
      <div class="relative">
        <button
          id="userBtn"
          class="rounded-full p-2 hover:bg-muted"
          aria-label="Usuario"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
            viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M5.121 17.804A9.003 9.003 0 0112 15c2.485 0 4.735.996 6.364 2.804M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
        </button>

        <!-- Dropdown -->
        <div
          id="userMenu"
          class="hidden absolute right-0 mt-2 w-44 bg-white border rounded-lg shadow-lg"
        >
          <button
            id="loginMenuBtn"
            class="w-full px-4 py-2 text-left hover:bg-muted"
          >
            Iniciar SesiÃ³n
          </button>
          <button
            id="logoutBtn"
            class="hidden w-full px-4 py-2 text-left hover:bg-muted border-t"
          >
            Cerrar sesiÃ³n
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- MenÃº ADMIN -->
  <nav id="adminMenu" class="hidden border-t bg-background">
    <div class="container mx-auto px-6 py-3 flex gap-4">
      <button type="button" class="flex items-center gap-2 px-4 py-2 rounded-lg bg-black text-white hover:bg-gray-900 transition" data-view="products">
        ðŸ“¦ Inventario
      </button>
      <button type="button" class="flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-muted transition" data-view="orders">
        ðŸ“‹ Pedidos / Entradas
      </button>
      <button type="button" class="flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-muted transition" data-view="sales">
        ðŸ“‰ Salidas
      </button>
      <button type="button" class="flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-muted transition" data-view="cash">
        ðŸ’° Caja
      </button>
    </div>
  </nav>
</header>

<LoginDialog />

<script>
  import { initHeader } from '../scripts/header.js';
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initHeader);
  } else {
    initHeader();
  }
</script>
